<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<html>
<head>
	<title>Cacti Upgrade Instructions</title>
	<style>
	<!--
		BODY
		{
			font-size: 10pt;
			font-family: Arial, sans-serif;
		}
		
		P.code
		{
			font-size: 10pt;
			font-family: Courier New, Courier;
			font-weight: bold;
			margin: 5px;
			padding: 5px;
			color: #000066;
			background-color: #EEEEEE;
		}
		
		TT.shell
		{
			font-size: 10pt;
			font-family: Courier New, Courier;
			font-weight: normal;
			color: #999999;
		}
		
		P.php
		{
			font-size: 10pt;
			font-family: Courier New, Courier;
			font-weight: normal;
			color: #000000;
			margin: 5px;
			padding: 5px;
			background-color: #EEEEEE;
		}
		
		TT.php-var
		{
			font-size: 10pt;
			font-family: Courier New, Courier;
			font-weight: normal;
			color: #008080;
		}
	-->
	</style>
</head>

<body>

<h2>Cacti Upgrade</h2><p>

<h3>Upgrade Instructions</h3><p>

<ol>
	<li>Backup the old cacti database:<p>
		
		<p class="code"><tt class="shell">shell&gt;</tt> <b>mysqldump cacti > mysql.cacti</b></p><br>
		
	<li>Backup the old cacti directory:<p>
		
		<p class="code"><tt class="shell">shell&gt;</tt> <b>mv cacti cacti_old</b></p><br>
		
	<li>Extract the distribution tarball.<p>
	
		<p class="code"><tt class="shell">shell&gt;</tt> <b>tar xzvf cacti-<i>version</i>.tar.gz</b></p><br>

	<li>Rename the new cacti directory to match the old one:<p>
	
		<p class="code"><tt class="shell">shell&gt;</tt> <b>mv cacti-<em>version</em> cacti</b></p><br>
		
	<li>Copy the *.rrd files from the old cacti directory:<p>
	
		<p class="code"><tt class="shell">shell&gt;</tt> <b>cp cacti_old/rra/* cacti/rra/</b></p><br>

	<li>Edit <b>include/config.php</b>.<p>

	<ul>
		<li><p>Specify the MySQL user, password and database for your cacti configuration.</p></li>
		
		<p class="php"><b>$database_default</b> = <tt class="php-var">"cacti"</tt>;<br>
		<b>$database_hostname</b> = <tt class="php-var">"localhost"</tt>;<br>
		<b>$database_username</b> = <tt class="php-var">"cactiuser"</tt>;<br>
		<b>$database_password</b> = <tt class="php-var">"cacti"</tt>;<br>
		</p><br>
	</ul>

	<li>Set the appropriate permissions on cacti's directories for graph/log generation. You should execute these commands from inside cacti's directory to change the permissions.<p>
		
		<p class="code"><tt class="shell">shell&gt;</tt> <b>chown <em>cactiuser</em> rra/ log/</b></p><br>
		
		<p>(Enter a valid username for <em>cactiuser</em>, this user will also be used in the next step for 
		data gathering.)</p>
	
	<li>Point your web browser to:<p>
	
		<blockquote>http://your-server/cacti/</blockquote>
		
		<p>Make sure to fill in all of the path variables carefully
		and correctly on the following screen.</p>
</ol>

</body>
</html>
